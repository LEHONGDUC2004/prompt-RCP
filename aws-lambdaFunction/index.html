<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Đăng Nhập</title>
  <style>
    body {font-family: Arial, sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}
    .login-container {background:#fff;padding:2rem;border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,0.1);width:100%;max-width:400px}
    .login-title {text-align:center;color:#333;margin-bottom:1.5rem}
    .form-group {margin-bottom:1rem}
    label {display:block;margin-bottom:0.5rem;color:#555;font-weight:bold}
    input[type=text], input[type=password] {width:100%;padding:0.75rem;border:1px solid #ddd;border-radius:5px;font-size:1rem;box-sizing:border-box}
    input[type=text]:focus, input[type=password]:focus {outline:none;border-color:#667eea;box-shadow:0 0 0 2px rgba(102,126,234,0.2)}
    .login-btn {width:100%;padding:0.75rem;background:#667eea;color:#fff;border:none;border-radius:5px;font-size:1rem;cursor:pointer;transition:background 0.3s}
    .login-btn:hover {background:#5a6fd8}
    .login-btn:disabled {background:#ccc;cursor:not-allowed}
    .message {margin-top:1rem;padding:0.75rem;border-radius:5px;text-align:center;font-weight:bold}
    .success {background:#d4edda;color:#155724;border:1px solid #c3e6cb}
    .error {background:#f8d7da;color:#721c24;border:1px solid #f1aeb5}
    .loading {background:#fff3cd;color:#856404;border:1px solid #ffeaa7}
    .hint {margin-top:1rem;padding:0.5rem;background:#e2e3ea;border-radius:5px;font-size:0.9rem;color:#666}
  </style>
</head>
<body>
  <div class="login-container">
    <h1 class="login-title">🔐 Đăng Nhập</h1>
    <form id="loginForm">
      <div class="form-group">
        <label for="username">Tên đăng nhập:</label>
        <input type="text" id="username" name="username" required>
      </div>
      <div class="form-group">
        <label for="password">Mật khẩu:</label>
        <input type="password" id="password" name="password" required>
      </div>
      <button type="submit" class="login-btn" id="loginBtn">Đăng Nhập</button>
    </form>
    <div id="message" class="message" style="display:none;"></div>
    <div class="hint">
      💡 Dùng thử: <code>duc123 / 123456</code>
    </div>
  </div>

  <script>
    const API_URL = "https://ev530045h9.execute-api.us-east-1.amazonaws.com/prod/login";

    const form = document.getElementById("loginForm");
    const loginBtn = document.getElementById("loginBtn");
    const messageDiv = document.getElementById("message");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;

      loginBtn.textContent = "Đang đăng nhập...";
      loginBtn.disabled = true;
      messageDiv.style.display = "block";
      messageDiv.className = "message loading";
      messageDiv.textContent = "Đang xử lys";

      try {
        const response = await fetch(API_URL, {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify({ username, password })
        });
        const data = await response.json();
        if (data.success) {
          messageDiv.className = "message success";
          messageDiv.innerHTML = "" + data.message + "<br>Xin chào " + username;
        } else {
          messageDiv.className = "message error";
          messageDiv.innerHTML = " " + data.message;
        }
      } catch (err) {
        messageDiv.className = "message error";
        messageDiv.innerHTML = "Lỗi kết nối tới API";
      }
      loginBtn.textContent = "Đăng Nhập";
      loginBtn.disabled = false;
    });
  </script>
</body>
</html>
